<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Black Hook â€” Viewer</title>
  <style>
    body { margin: 0; background: #000; color: #fff; overflow: hidden; }
    iframe { width: 100vw; height: 100vh; border: 0; display: block; }
  </style>
</head>
<body>

<script>
  const params = new URLSearchParams(location.search);
  const site = params.get('site');

  if(!site){
    document.body.innerHTML = '<div style="padding:24px;color:#fff;font-family:sans-serif;">No game selected. Add ?site=URL to the address bar.</div>';
  } else {
    // 1. Clean up the URL
    let url = site;
    try { url = decodeURIComponent(site); } catch(e){ url = site; }
    if(!/^[a-zA-Z]+:\/\//.test(url)) url = 'https://' + url;
    
    // 2. Inject Iframe with MAX permissions for Mouse Lock
    // We strictly added 'allow-pointer-lock' to both sandbox and allow attributes
    document.body.innerHTML = `
      <iframe 
        id="game-frame" 
        src="${url}" 
        allow="autoplay; clipboard-write; encrypted-media; picture-in-picture; web-share; pointer-lock" 
        sandbox="allow-forms allow-scripts allow-same-origin allow-popups allow-pointer-lock allow-orientation-lock">
      </iframe>`;

    // 3. Auto-focus the iframe so the first click registers immediately
    const iframe = document.getElementById('game-frame');
    iframe.onload = function() {
      iframe.focus();
    };
  }
</script>
</body>
</html>
